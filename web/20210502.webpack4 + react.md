# webpack4配置react开发环境
## webpack配置babel解析ES6  
    
1.安装webpack依赖
> npm i webpack@4 webpack-cli -D
   
2.安装babel解析js的依赖  
> npm i @babel/core @babel/preset-env babel-loader  -D 

3.安装完babel后需要添加  ``.babelrc``  的文件
```js
//  /.babelrc
{
    "presets": [
        "@babel/preset-env"
    ]
}
```

4.编写webpack配置

```js
//  /webpack.config.js
const path = require('path')
/**
 *  @type {import('webpack').Configuration}
 */
module.exports = {
    entry: {
        main: './src/index.js'
    },
    output:{
        path: path.resolve(__dirname, './dist'),
        filename: '[name]-[hash].js'
    },
    module:{
        rules: [
            {
                test: /.js$/,
                use:[
                    {
                        loader: 'babel-loader',
                    },
                ]
            }
        ]
    }
}
```
5.使用webpack打包当前代码  
方式1: 
```bash
# webapck的可执行文件就在这个目录下面, 执行下面代码, webpack会找到当前目录下的webpack.config.js文件, 如果没有则使用webpack的默认配置
./node_modules/.bin/webpack 
# npm提供了npx的方式来执行./node_modules/.bin目录下的可执行文件, 下面命令小效果同上
npx webpack
```  



方式2:  

全局安装webpack@4 webpack-cli
> webpack  

然后执行webpack, 同样webpack会找到当前目录下的webpack.config.js,如果没有提供则使用webpack的默认配置   
  

方式3: 
在package.json中的script中添加执行命令
```js
{
  "scripts": {
    "test": "webpack"
  },
}
```  

`方式1使用的是安装到本地node_modules/.bin 目录下的webpack, webpack-cli的可执行文件, 而方式2使用的是安装到全局的webpack, webpack-cli, 使用时要注意webpack版本的差异, 方式3先查找本地然后查找全局`


## webpack配置babel-react解析react
1.安装依赖
首先需要安装react的相关联依赖  
> npm i react react-dom -D  
```js
//   /src/index.js
import React from 'react'
import ReactDom from 'react-dom'
class Index extends React.Component {
    state={
        name: "哈哈"
    }
    render(){
        return <div style={{
            color: 'red',
        }}>{this.state.name}</div>
    }
}
ReactDom.render(
    <Index></Index>,
    document.getElementById('app')
)
```
2.webpack编译jsx语法
> npm i @babel/preset-react -D
```js
//  /.babelrc
{
    "presets": [
        "@babel/preset-env",
        "@babel/preset-react"
    ]
}
```
3.安装html-webpack-plugin自动将打包后的bundle插入到html文件中
```js
//  /webpack.config.js
const path = require('path')
const HtmlWebpackPlugin  = require('html-webpack-plugin')
/**
 *  @type {import('webpack').Configuration}
 */
module.exports = {
    entry: {
        index: './src/index.js',
        helloworld: './src/helloworld.js'
    },
    output:{
        path: path.resolve(__dirname, './dist'),
        filename: '[name]-[hash].js'
    },
    module:{
        rules: [
            {
                test: /.js$/,
                use:[
                    {
                        loader: 'babel-loader',
                    },
                ]
            }
        ]
    },
    plugins: [
        new HtmlWebpackPlugin({
            template: './public/index.html'
        }),
    ]
}
```
```html
<!-- /public/index.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <div id="app"></div>
</body>
</html>

```


